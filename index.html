
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Bar Chart</title>
  <!-- jQuery CDN -->
  <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
  <style>

  </style>
</head>

<body>
  <div id="container"></div>
  <script>

    $(function () {
      let config = {
        title: 'This is my Chart Title',
        width: '100%',
        height: '80px',
        titleColor: 'red',
        titleFontSize: '25pt',
        barColor: 'green',
        barSpacing: '10px',
        labelColor: 'white',
        labelPosition: 'bottom',
      }
      drawBarChart(test, config, '#container')
    });

    function drawBarChart(data, options, element) {
      $(element).append(layout);

      $('.chart').css({'grid-template-columns': 'repeat(' + Object.keys(data).length + ', 1fr)'});
      $('.labels').css({'grid-template-columns': 'repeat(' + Object.keys(data).length + ', 1fr)'});

      for(let i=0; i < Object.keys(data).length; i++) {
        let key = Object.keys(data)[i];
        $('.yAxis').append('<div class="yAx y">Data' + (i + 1) + '</div>');
        $('.chart').append('<div class="row row' + (i + 1) + '"></div>');
        $('.chart').append('<div class="col col' + (i + 1) + '"><div class="bar bar' + (i + 1) + '"><span class="percent">' + test[key] + '%</span></div></div>');
        $('.labels').append('<div class="label l' + (i + 1) + '">' + key + '</div>');
        $('.row' + (i + 1)).css({'grid-row': (i + 1)});
        $('.col' + (i + 1)).css({'grid-column': (i + 1)});
        $('.bar' + (i + 1)).css({'height': data[key] + '%'});
      }
      $('.col').css({'grid-row': '1/' + (Object.keys(data).length + 1)});
      $('.row').css({'grid-column': '1/' + (Object.keys(data).length + 1)});
      $('.chart').css({'grid-auto-rows': 'minmax(' + options.height + ', auto)'});
      $('.title').css({'color': options.titleColor, 'font-size': options.titleFontSize});
      $('.bar').css({'background': options.barColor});
      $('.percent').css({'color': options.labelColor, 'bottom': options.labelPosition === 'top' ? '85%' : options.labelPosition === 'centre' ? '45%' : '10%'});

      Object.keys(chartStyles).map(x => {
        let selector = x.split('_')[0];
        selector = selector === 'class' ? '.' : selector === 'id' ? '#' : selector === 'all' ? '*' : '';
        $(selector + x.split('_')[1]).css(chartStyles[x]);
      });

      Object.keys(data).map(x => {
        console.log(x);
      });
    }

    const test = {
      HTML: 100,
      //JavaScript: 80,
      CSS: 45,
      "React": 66,
      'C#': 63,
      MONGO: 74,
      FIREBASE: 33,
      SQL: 15
    }
    var layout = '<div class="wrapper"><div class="title">' + 'options.title' + '</div><div class="yAxis"></div><div class="chart"></div><div class="labels"></div></div>';
    var yAxis = '<div class="yAx y">Data</div>';
    var row = '<div class="row row1"></div>';
    const chartStyles = {
      'all_': {
        'margin': '0 0 0 0',
        'font-family': "'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif"
      },
      'class_wrapper': {
        'display': 'grid',
        'grid-template-columns': '1fr 6fr'
      },
      'class_title': {
        'margin': '20px 0 20px 0',
        'grid-column': '1/3',
        'grid-row': 1,
        //'border': '#000 1px solid',
        'text-align': 'center'
      },
      'class_yAxis': {
        'border': '#000 1px solid',
        'grid-column': '1/2',
        'grid-row': 2,
        'display': 'grid'
      },
      'class_yAx': {
        'border': '#000 1px solid',
        'text-align': 'center'
      },
      'class_chart': {
        'grid-column': '2/3',
        'grid-row': 2,
        'display': 'grid',
        //'grid-template-columns': 'repeat(5, 1fr)',
        //'grid-auto-rows': 'minmax(100px, auto)',
        //'grid-gap': '1em'
      },
      'class_labels': {
        'border': '#000 1px solid',
        'height': '50px',
        'grid-column': '2/3',
        'grid-row': 3,
        'display': 'grid',
        //'grid-template-columns': 'repeat(5, 1fr)'
      },
      'class_label': {
        //'background': 'yellow',
        //'border': '#000 1px solid',
        'text-align': 'center'
      },
      'class_chart div': {
        //'background': '#eee'
      },
      'class_chart div:nth-child(odd)': {
        //'background': '#ddd'
      },
      'class_row': {
        'border-bottom': '#000 1px solid',
        //'grid-column': '1/6'
      },
      'class_col': {
        'position': 'relative',
        //'border': '1px solid #000',
        //'grid-row': '1/7'

      },
      'class_bar': {
        'position': 'absolute',
        //'background': 'blue',
        'border': '#000 1px solid',
        'bottom': 0,
        'width': '50%',
        'left': '25%',
        'text-align': 'center'
      },
      'class_percent': {
        'position': 'absolute',
        'display': 'inline-block',
        //'color': 'red',
        //'bottom': '45%',
        'left': '15%'
      }
    };
  </script>
</body>

</html>
